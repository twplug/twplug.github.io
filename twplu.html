<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connector</title>
    <style>body{font-family:monospace;white-space:pre;background:#0d1117;color:#c9d1d9;padding:1em;}</style>
</head>
<body>
    Initializing...
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script>
        const x = ["myUID", "DOMContentLoaded", "invite", "invites", "connections", "pending", "invlist=", "invkill=", "value", "split", "substring", "getItem", "setItem", "startsWith", "includes", "innerHTML", "pre", "ВАШ ID: ", "\n\n> Отправить приглашение (откройте в новой вкладке):\n?ID_ОТПРАВИТЕЛЯ", "ID_ПОЛУЧАТЕЛЯ\n\n> Проверить ваши приглашения:\n?", "\n\n> Удалить ваши отправленные приглашения:\n?", "Ошибка: Неверный формат приглашения. Используйте ?ID1inviteID2", "Соединение установлено: ", "Приглашение отправлено от ", " к ", ". Ожидание ответного приглашения.", "Ошибка: ID пользователя не указан для invlist.", "Отправленные приглашения для ", ":\n", "  - Кому: ", " (статус: ", ")", "\n", "Нет отправленных приглашений для ", ".\n\n", "Входящие приглашения для ", ":\n", "  - От: ", "Входящих приглашений не найдено.", "Ошибка: ID пользователя не указан для invkill.", "Все отправленные приглашения для ", " были удалены.", "Ошибка при удалении приглашений: ", "Неизвестная команда. Ваш ID: "];
        const y = {apiKey: "AIzaSyCbbbkstsx0b7GMuF2THRZvF7g_IF9bmdY", authDomain: "twplub.firebaseapp.com", databaseURL: "https://twplub-default-rtdb.firebaseio.com", projectId: "twplub", storageBucket: "twplub.firebasestorage.app", messagingSenderId: "774675126793", appId: "1:774675126793:web:d4dbc1c76cca733af8b6d8" };
        firebase.initializeApp(y);
        const z = firebase.database();
        document.addEventListener(x[1], () => {
            const a = window.location.search[x[10]](1);
            const b = document.body;
            const c = (m) => { b[x[15]] = `<${x[16]}>${m}</${x[16]}>`; };
            let d = localStorage[x[11]](x[0]);
            if (!d) { d = Math.random().toString(36)[x[10]](2, 12); localStorage[x[12]](x[0], d); }
            if (!a) { c(`${x[17]}${d}${x[18]}${d}${x[2]}${x[19]}${x[20]}${x[6]}${d}${x[21]}${x[7]}${d}`); return; }
            if (a[x[14]](x[2])) {
                const e = a[x[9]](x[2]);
                const f = e[0];
                const g = e[1];
                if (!f || !g) { c(x[22]); return; }
                z.ref(`${x[3]}/${g}/${f}`).once(x[8], h => {
                    if (h.exists()) {
                        const i = `${f}+${g}`;
                        z.ref(`${x[4]}/${f}`).set(i);
                        z.ref(`${x[4]}/${g}`).set(i);
                        z.ref(`${x[3]}/${f}`).remove();
                        z.ref(`${x[3]}/${g}`).remove();
                        c(`${x[23]}${i}`);
                    } else {
                        z.ref(`${x[3]}/${f}/${g}`).set(x[5]);
                        c(`${x[24]}${f}${x[25]}${g}${x[26]}`);
                    }
                });
                return;
            }
            if (a[x[13]](x[6])) {
                const j = a[x[9]]('=')[1];
                if (!j) { c(x[27]); return; }
                z.ref(`${x[3]}/${j}`).once(x[8], k => {
                    let l = `${x[36]}${j}${x[37]}`;
                    if (k.exists()) {
                        const m = k.val();
                        const n = Object.keys(m).map(o => `${x[32]}${o}${x[33]}${m[o]}${x[34]}`).join(x[35]);
                        l = `${x[31]}${j}${x[31.5]}${n}`;
                    }
                    z.ref(x[3]).once(x[8], p => {
                        let q = `${x[41]}`;
                        let r = [];
                        if (p.exists()) { p.forEach(s => { if (s.val()[j]) { r.push(`${x[40]}${s.key}`); } }); }
                        if (r.length > 0) { q = `${x[38]}${j}${x[39]}${r.join(x[35])}`; }
                        c(`${l}${x[37]}${q}`);
                    });
                });
                return;
            }
            if (a[x[13]](x[7])) {
                const t = a[x[9]]('=')[1];
                if (!t) { c(x[42]); return; }
                z.ref(`${x[3]}/${t}`).remove().then(() => { c(`${x[43]}${t}${x[44]}`); }).catch(e => { c(`${x[45]}${e.message}`); });
                return;
            }
            c(`${x[46]}${d}`);
        });
    </script>
</body>
</html>
